<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–∏–±–ª–∏–æ—Ç–µ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö –ë–∏–±–ª–∏–æ—Ç–µ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h1>
            <nav>
                <button class="nav-btn active" data-target="tables">–¢–∞–±–ª–∏—Ü—ã</button>
                <button class="nav-btn" data-target="reports">–û—Ç—á–µ—Ç—ã</button>
                <button class="nav-btn" data-target="subscription-form">–í—ã–¥–∞—á–∞ –∫–Ω–∏–≥</button>
                <!-- –î–æ–±–∞–≤—å—Ç–µ —ç—Ç—É –∫–Ω–æ–ø–∫—É –≤—Ä–µ–º–µ–Ω–Ω–æ –≤ index.html –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <button onclick="testBookCreation()">–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–∏–≥–∏</button>

    <script>
    async function testBookCreation() {
        const testData = {
            title: "–¢–µ—Å—Ç–æ–≤–∞—è –∫–Ω–∏–≥–∞",
            publisher: "–¢–µ—Å—Ç–æ–≤–æ–µ –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ",
            publish_place: "–ú–æ—Å–∫–≤–∞",
            publish_year: 2023,
            quantity: 5,
            price: 500.0,
            library_id: 2,
            topic_id: 3,
            author_id: 2
        };

        console.log('üß™ Testing book creation with:', testData);

        try {
            const response = await fetch('/api/books/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(testData)
            });

            console.log('üìã Response status:', response.status);
            
            if (response.ok) {
                const result = await response.json();
                console.log('‚úÖ Success:', result);
                alert('–ö–Ω–∏–≥–∞ —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ!');
            } else {
                const error = await response.json();
                console.log('‚ùå Error details:', error);
                alert('–û—à–∏–±–∫–∞: ' + JSON.stringify(error));
            }
        } catch (error) {
            console.error('üåê Network error:', error);
            alert('–°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞: ' + error.message);
        }
    }
    </script>
            </nav>
        </header>

        <main>
            <!-- –¢–∞–±–ª–∏—Ü—ã -->
            <section id="tables" class="content-section active">
                <div class="controls">
                    <select id="table-select">
                        <option value="libraries">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏</option>
                        <option value="topics">–¢–µ–º—ã</option>
                        <option value="authors">–ê–≤—Ç–æ—Ä—ã</option>
                        <option value="books">–ö–Ω–∏–≥–∏</option>
                        <option value="readers">–ß–∏—Ç–∞—Ç–µ–ª–∏</option>
                        <option value="subscriptions">–ü–æ–¥–ø–∏—Å–∫–∏</option>
                    </select>
                    <button id="add-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
                    <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫...">
                    <select id="sort-select">
                        <option value="">–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</option>
                    </select>
                    <select id="filter-select">
                        <option value="">–§–∏–ª—å—Ç—Ä</option>
                    </select>
                </div>
                <div class="table-container">
                    <table id="data-table">
                        <thead>
                            <tr>
                                <!-- –ó–∞–≥–æ–ª–æ–≤–∫–∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </tr>
                        </thead>
                        <tbody>
                            <!-- –î–∞–Ω–Ω—ã–µ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </tbody>
                    </table>
                </div>
                <div class="pagination">
                    <button id="prev-btn">‚Üê –ù–∞–∑–∞–¥</button>
                    <span id="page-info">–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1</span>
                    <button id="next-btn">–í–ø–µ—Ä–µ–¥ ‚Üí</button>
                </div>
            </section>

            <!-- –û—Ç—á–µ—Ç—ã -->
            <section id="reports" class="content-section">
                <div class="report-controls">
                    <select id="report-select">
                        <option value="library-stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫</option>
                        <option value="author-stats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞–≤—Ç–æ—Ä–æ–≤</option>
                        <option value="active-subscriptions">–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏</option>
                        <option value="book-prices">–¶–µ–Ω—ã –∫–Ω–∏–≥ –ø–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º</option>
                    </select>
                    <div id="report-filters">
                        <!-- –§–∏–ª—å—Ç—Ä—ã –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                    <button id="generate-report">–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç</button>
                </div>
                <div class="report-container">
                    <table id="report-table">
                        <!-- –û—Ç—á–µ—Ç –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </table>
                </div>
            </section>

            <!-- –§–æ—Ä–º–∞ –≤—ã–¥–∞—á–∏ –∫–Ω–∏–≥ (1:–ú) -->
            <section id="subscription-form" class="content-section">
                <h2>üìñ –í—ã–¥–∞—á–∞ –∫–Ω–∏–≥–∏ —á–∏—Ç–∞—Ç–µ–ª—é</h2>
                <form id="subscription-form-element">
                    <div class="form-group">
                        <label for="reader-select">–ß–∏—Ç–∞—Ç–µ–ª—å:</label>
                        <select id="reader-select" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —á–∏—Ç–∞—Ç–µ–ª—è</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="book-select">–ö–Ω–∏–≥–∞:</label>
                        <select id="book-select" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–Ω–∏–≥—É</option>
                        </select>
                        <span id="book-quantity"></span>
                    </div>
                    <div class="form-group">
                        <label for="library-select">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:</label>
                        <select id="library-select" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="deposit">–ó–∞–ª–æ–≥:</label>
                        <input type="number" id="deposit" step="0.01" min="0" value="0">
                    </div>
                    <button type="submit">–í—ã–¥–∞—Ç—å –∫–Ω–∏–≥—É</button>
                </form>
                <div id="subscription-result"></div>
            </section>
        </main>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modal-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
            <form id="modal-form">
                <!-- –§–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </form>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>